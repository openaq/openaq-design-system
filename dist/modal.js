"use strict";var _react=_interopRequireDefault(require("react")),_propTypes=require("prop-types"),_reactAddonsCssTransitionGroup=_interopRequireDefault(require("react-addons-css-transition-group")),_createReactClass=_interopRequireDefault(require("create-react-class"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var Modal=(0,_createReactClass.default)({displayName:"Modal",propTypes:{id:_propTypes.PropTypes.string.isRequired,revealed:_propTypes.PropTypes.bool,className:_propTypes.PropTypes.string,onOverlayClick:_propTypes.PropTypes.func,onCloseClick:_propTypes.PropTypes.func,children:function(e,o,r){var a=["ModalHeader","ModalBody","ModalFooter"],t=["ModalHeader","ModalBody"],l=_react.default.Children.toArray(e[o]),n=l.length;if(0===n||n>3)return new Error("".concat(r," should have at least a child but no more than 3"));for(var s={},d=0;d<n;d++){var i=l[d],i=i.type.displayName||i.type;if(-1===a.indexOf(i))return new Error("".concat(r," children should be of the following types: ").concat(a.join(", ")));if(s[i]||(s[i]=0),++s[i]>1)return new Error("".concat(r," should have only one instance of: ").concat(i))}for(var c=0;c<t.length;c++)if(!s[t[c]])return new Error("".concat(r," should have a ").concat(t[c]))}},toggleUnscrollableClass:function(e){var o=document.documentElement;e?o.classList.add("unscrollable-y"):o.classList.remove("unscrollable-y")},componentDidUpdate:function(){this.toggleUnscrollableClass(this.props.revealed)},componentDidMount:function(){this.toggleUnscrollableClass(this.props.revealed)},componentWillUnmount:function(){this.toggleUnscrollableClass(!1)},getDefaultProps:function(){return{revealed:!1,onOverlayClick:function(){"production"!==process.env.NODE_ENV&&console.warn("Modal","onOverlayClick handler not implemented")},onCloseClick:function(){"production"!==process.env.NODE_ENV&&console.warn("Modal","onCloseClick handler not implemented")}}},onOverlayClick:function(e){e.target,e.currentTarget},onCloseClick:function(e){e.preventDefault(),this.props.onCloseClick.call(this,e)},getChild:function(o){var r=null;return _react.default.Children.forEach(this.props.children,function(e){r||e.type.displayName!==o||(r=e)}),r},render:function(){var e=["modal"];return this.props.className&&e.push(this.props.className),_react.default.createElement(_reactAddonsCssTransitionGroup.default,{component:"div",transitionName:"modal",transitionEnterTimeout:300,transitionLeaveTimeout:300},this.props.revealed?_react.default.createElement("section",{className:e.join(" "),key:"modal-"+this.props.id,onClick:this.onOverlayClick,id:this.props.id},_react.default.createElement("div",{className:"modal__inner"},this.getChild("ModalHeader"),this.getChild("ModalBody"),this.getChild("ModalFooter")),_react.default.createElement("button",{className:"modal__button-dismiss",title:"Close",onClick:this.onCloseClick},_react.default.createElement("span",null,"Dismiss"))):null)}}),ModalHeader=(0,_createReactClass.default)({displayName:"ModalHeader",propTypes:{children:_propTypes.PropTypes.node},render:function(){return _react.default.createElement("header",{className:"modal__header"},this.props.children)}}),ModalBody=(0,_createReactClass.default)({displayName:"ModalBody",propTypes:{children:_propTypes.PropTypes.node},render:function(){return _react.default.createElement("div",{className:"modal__body"},this.props.children)}}),ModalFooter=(0,_createReactClass.default)({displayName:"ModalFooter",propTypes:{children:_propTypes.PropTypes.node},render:function(){return _react.default.createElement("footer",{className:"modal__footer"},this.props.children)}});module.exports={Modal:Modal,ModalHeader:ModalHeader,ModalBody:ModalBody,ModalFooter:ModalFooter};